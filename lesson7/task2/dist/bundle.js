(()=>{"use strict";function t(t,e){return t.done!=e.done?t.done-e.done:t.date>e.date?-1:t.date<e.date?1:0}function e(t){let{text:e,done:n,id:o}=t;const c=document.createElement("li");c.classList.add("list__item");const s=document.createElement("input");s.setAttribute("type","checkbox"),s.checked=n,s.classList.add("list__item-checkbox"),s.dataset.id=o;const i=document.createElement("span");n&&(c.classList.add("list__item_done"),i.classList.add("text__item_done"));const d=document.createElement("button");return d.classList.add("delete-button"),d.textContent="+",i.textContent=e,c.append(s,i,d),c}const n=document.querySelector(".list"),o=o=>{document.querySelector(".task-input").value="",document.querySelector(".list").innerHTML="";const c=o.sort(t).map(e);n.append(...c)},c="http://62d56536d4406e523559e20d.mockapi.io/avi/v1/taskList";function s(){return fetch(c).then((t=>t.json()))}const i=document.querySelector(".task-input"),d=document.querySelector(".list"),a=document.querySelector(".create-task-btn");s().then((t=>o(t))),a.addEventListener("click",(function(){var t;i.value&&(t={text:i.value,done:!1,date:JSON.parse(JSON.stringify(new Date))},fetch(c,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)})).then((()=>s().then((t=>o(t)))))})),d.addEventListener("click",(function(t){var e;t.target.classList.contains("list__item-checkbox")?function(t){const e=t.dataset.id;return s().then((t=>{const n=t.find((t=>t.id==e));return n.done=!n.done,function(t){const{id:e,...n}=t;return fetch(`${c}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)})}(n)}))}(t.target).then((()=>s())).then((t=>o(t))):t.target.classList.contains("delete-button")&&(e=t.target.previousSibling.previousSibling.dataset.id,fetch(`${c}/${e}`,{method:"DELETE"})).then((()=>s())).then((t=>o(t)))}))})();